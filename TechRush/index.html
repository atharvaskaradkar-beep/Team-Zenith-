<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus | Ultimate Student Welfare Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; transition: background-color 0.3s ease; }
        .hero-gradient {
            background: radial-gradient(circle at top right, #e0f2fe, transparent),
                        radial-gradient(circle at bottom left, #fefce8, transparent), #f9f7f2;
        }
        .dark .hero-gradient {
            background: radial-gradient(circle at top right, #1e293b, transparent),
                        radial-gradient(circle at bottom left, #0f172a, transparent), #020617;
        }
        .bg-nexus-blue { background-color: #004aad; }
        .text-nexus-blue { color: #004aad; }
        .bg-nexus-mint { background-color: #c1ff72; }
        .hidden-section { display: none !important; }
        .tab-content { display: none; }
        .tab-content.active { display: block !important; }
        .active-nav { background: #004aad !important; color: white !important; transform: translateX(10px); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade { animation: fadeIn 0.4s ease forwards; }
        .disabled-btn { opacity: 0.4; cursor: not-allowed; pointer-events: none; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 overflow-x-hidden">

    <div id="page-home" class="min-h-screen flex flex-col hero-gradient">
        <header class="p-6 flex justify-between items-center max-w-7xl mx-auto w-full">
            <div class="font-extrabold text-2xl tracking-tighter text-nexus-blue dark:text-blue-400">NEXUS.</div>
            <button onclick="changePage('page-login')" class="font-bold border-2 border-nexus-blue text-nexus-blue px-6 py-2 rounded-full hover:bg-nexus-blue hover:text-white transition-all">Login</button>
        </header>
        <main class="flex-1 grid grid-cols-1 md:grid-cols-2 items-center px-10 md:px-20 max-w-7xl mx-auto w-full gap-8">
            <div class="space-y-6">
                <div class="inline-block bg-nexus-mint px-4 py-1 rounded-full text-sm font-bold uppercase tracking-wider text-slate-900">AI-Powered Welfare</div>
                <h1 class="text-6xl md:text-7xl font-extrabold leading-tight text-slate-900 dark:text-white">Smart <br> <span class="text-nexus-blue dark:text-blue-400 italic underline decoration-yellow-400">Empowerment</span></h1>
                <p class="text-lg opacity-70 max-w-md">The world's most secure student verification vault. Get the support you deserve, backed by AI forensics.</p>
                <div class="pt-6">
                    <button onclick="changePage('page-login')" class="bg-nexus-blue text-white font-bold py-4 px-10 rounded-2xl shadow-xl hover:scale-105 transition-all">Get Started</button>
                </div>
            </div>
            <div class="relative flex justify-center items-center overflow-hidden max-h-[500px]">
                <img src="https://images.pexels.com/photos/1438072/pexels-photo-1438072.jpeg" class="rounded-[2rem] shadow-2xl border-[12px] border-white dark:border-slate-800 max-w-full h-auto object-contain" alt="Student">
            </div>
        </main>
    </div>

    <div id="page-login" class="hidden-section h-screen w-full flex items-center justify-center hero-gradient p-6">
        <div class="bg-white/70 dark:bg-slate-900/70 backdrop-blur-xl p-10 rounded-[2.5rem] w-full max-w-md shadow-2xl border border-white/20 text-center">
            <h2 class="text-3xl font-extrabold mb-10 text-slate-900 dark:text-white">Student <span class="text-nexus-blue">Login</span></h2>
            <div class="space-y-4 text-left">
                <label class="text-xs font-bold opacity-50 px-2 uppercase">Email Address</label>
                <input id="user-email" type="email" placeholder="Enter any email" class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 border-0 outline-none focus:ring-2 focus:ring-nexus-blue text-slate-900 dark:text-white shadow-inner">
                <label class="text-xs font-bold opacity-50 px-2 uppercase">Password</label>
                <input id="user-pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" class="w-full p-4 rounded-2xl bg-white dark:bg-slate-800 border-0 outline-none focus:ring-2 focus:ring-nexus-blue text-slate-900 dark:text-white shadow-inner">
                <button onclick="handleLogin()" class="w-full bg-nexus-blue py-4 mt-4 rounded-2xl text-white font-bold hover:opacity-90 transition-all shadow-lg">Enter Portal</button>
                <button onclick="changePage('page-home')" class="w-full text-sm opacity-50 text-center mt-2">Back to Home</button>
            </div>
        </div>
    </div>

    <div id="page-portal" class="hidden-section flex h-screen w-full bg-white dark:bg-slate-950 overflow-hidden">
        <aside class="w-72 bg-slate-50 dark:bg-slate-900 border-r dark:border-slate-800 flex flex-col p-6">
            <div class="text-2xl font-black text-nexus-blue dark:text-blue-400 mb-10">NEXUS.</div>
            <nav class="flex-1 space-y-2">
                <button onclick="switchTab('scholar-tab', this)" class="nav-btn w-full text-left p-4 rounded-xl font-bold opacity-60 active-nav">üéì Scholarships</button>
                <button onclick="switchTab('verify-tab', this)" class="nav-btn w-full text-left p-4 rounded-xl font-bold opacity-60">üìÑ Document Vault</button>
                <button onclick="switchTab('chat-tab', this)" class="nav-btn w-full text-left p-4 rounded-xl font-bold opacity-60">ü§ñ AI Assistant</button>
                <button onclick="switchTab('grievance-tab', this)" class="nav-btn w-full text-left p-4 rounded-xl font-bold opacity-60">‚öñÔ∏è Support Hub</button>
                <button onclick="switchTab('profile-tab', this)" class="nav-btn w-full text-left p-4 rounded-xl font-bold opacity-60">üë§ Profile</button>
            </nav>
            <div class="pt-4 border-t dark:border-slate-800 space-y-2">
                <button onclick="toggleDarkMode()" class="w-full p-3 bg-slate-200 dark:bg-slate-800 rounded-xl font-bold text-[10px] uppercase">üåì Theme</button>
                <button onclick="handleLogout()" class="w-full p-3 text-red-500 font-bold hover:bg-red-50 rounded-xl text-[10px] uppercase">Logout</button>
            </div>
        </aside>

        <main class="flex-1 p-10 overflow-y-auto">
            <div id="scholar-tab" class="tab-content active">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4">
                    <h2 class="text-4xl font-black">Available <span class="text-nexus-blue">Grants</span></h2>
                    
                    <div class="flex gap-2">
                        <input type="text" id="scholarship-search" onkeyup="filterScholarships()" placeholder="Search scholarships..." class="px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 border-0 text-sm focus:ring-2 focus:ring-nexus-blue outline-none w-64">
                        <select id="category-filter" onchange="filterScholarships()" class="px-4 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 border-0 text-sm focus:ring-2 focus:ring-nexus-blue outline-none cursor-pointer">
                            <option value="all">All Categories</option>
                            <option value="Govt">Govt of India</option>
                            <option value="Minority">Minority</option>
                            <option value="Corporate">Corporate CSR</option>
                            <option value="State">State Govt</option>
                            <option value="Women">Women/STEM</option>
                            <option value="Merit">Merit Based</option>
                        </select>
                    </div>
                </div>

                <div id="scholarship-grid" class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                    <div class="scholar-card p-8 rounded-3xl bg-slate-900 text-white animate-fade" data-category="Govt" data-name="NSP Central Sector">
                        <span class="text-xs font-bold bg-blue-500 px-3 py-1 rounded-full uppercase">Govt of India</span>
                        <h3 class="text-2xl font-bold mt-4">NSP Central Sector</h3>
                        <p class="text-xs opacity-60 mt-2">Support for university students based on Class 12th merit. Direct Benefit Transfer (DBT) enabled.</p>
                        <button onclick="applyForScholarship('NSP Central Sector', 'Govt')" class="mt-6 bg-white text-black font-bold px-6 py-2 rounded-xl">Apply Now</button>
                    </div>
                    <div class="scholar-card p-8 rounded-3xl bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-100 animate-fade" data-category="Minority" data-name="MOMA Merit-Cum-Means">
                        <span class="text-xs font-bold bg-blue-600 text-white px-3 py-1 rounded-full uppercase">Minority</span>
                        <h3 class="text-2xl font-bold mt-4 text-slate-900 dark:text-white">MOMA Merit-Cum-Means</h3>
                        <p class="text-xs opacity-60 mt-2 text-slate-700 dark:text-slate-300">For professional/technical courses. Requires valid income certificate (under 2.5 LPA).</p>
                        <button onclick="applyForScholarship('MOMA MCM', 'Minority')" class="mt-6 bg-nexus-blue text-white font-bold px-6 py-2 rounded-xl">Apply Now</button>
                    </div>
                    <div class="scholar-card p-8 rounded-3xl bg-purple-50 dark:bg-purple-900/20 border-2 border-purple-100 animate-fade" data-category="Corporate" data-name="HDFC Badhte Kadam">
                        <span class="text-xs font-bold bg-purple-500 text-white px-3 py-1 rounded-full uppercase">Corporate CSR</span>
                        <h3 class="text-2xl font-bold mt-4 text-slate-900 dark:text-white">HDFC Badhte Kadam</h3>
                        <p class="text-xs opacity-60 mt-2 text-slate-700 dark:text-slate-300">Private funding for high-merit students from underprivileged backgrounds or those in crisis.</p>
                        <button onclick="applyForScholarship('HDFC Badhte Kadam', 'Corporate')" class="mt-6 bg-nexus-blue text-white font-bold px-6 py-2 rounded-xl">Apply Now</button>
                    </div>
                    <div class="scholar-card p-8 rounded-3xl bg-amber-50 dark:bg-amber-900/20 border-2 border-amber-100 animate-fade" data-category="State" data-name="Post-Matric ST/SC/OBC">
                        <span class="text-xs font-bold bg-amber-500 text-white px-3 py-1 rounded-full uppercase">State Govt</span>
                        <h3 class="text-2xl font-bold mt-4 text-slate-900 dark:text-white">Post-Matric (ST/SC/OBC)</h3>
                        <p class="text-xs opacity-60 mt-2 text-slate-700 dark:text-slate-300">State-funded fee reimbursement for reserved category students in higher education.</p>
                        <button onclick="applyForScholarship('State Post-Matric', 'State')" class="mt-6 bg-nexus-blue text-white font-bold px-6 py-2 rounded-xl">Apply Now</button>
                    </div>
                    <div class="scholar-card p-8 rounded-3xl bg-pink-50 dark:bg-pink-900/20 border-2 border-pink-100 animate-fade" data-category="Women" data-name="Pragati Scholarship">
                        <span class="text-xs font-bold bg-pink-500 text-white px-3 py-1 rounded-full uppercase">AICTE</span>
                        <h3 class="text-2xl font-bold mt-4 text-slate-900 dark:text-white">Pragati Scholarship</h3>
                        <p class="text-xs opacity-60 mt-2 text-slate-700 dark:text-slate-300">Empowering girls in technical education. Exclusive for AICTE approved degree/diploma courses.</p>
                        <button onclick="applyForScholarship('Pragati Scholarship', 'Women')" class="mt-6 bg-nexus-blue text-white font-bold px-6 py-2 rounded-xl">Apply Now</button>
                    </div>
                    <div class="scholar-card p-8 rounded-3xl bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-100 animate-fade" data-category="Merit" data-name="RF Undergraduate">
                        <span class="text-xs font-bold bg-emerald-500 text-white px-3 py-1 rounded-full uppercase">Reliance</span>
                        <h3 class="text-2xl font-bold mt-4 text-slate-900 dark:text-white">RF Undergraduate</h3>
                        <p class="text-xs opacity-60 mt-2 text-slate-700 dark:text-slate-300">Supporting future leaders in AI and Digital sectors across various Indian institutes.</p>
                        <button onclick="applyForScholarship('Reliance Foundation', 'Merit')" class="mt-6 bg-nexus-blue text-white font-bold px-6 py-2 rounded-xl">Apply Now</button>
                    </div>
                </div>
            </div>

            <div id="verify-tab" class="tab-content">
                <h2 class="text-4xl font-black mb-6">Document <span class="text-nexus-blue">Vault</span></h2>
                <div class="bg-slate-50 dark:bg-slate-900 p-10 rounded-[2.5rem] border-2 border-dashed border-slate-200 dark:border-slate-800 text-center">
                    <div class="mb-8 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl flex items-center gap-4 text-left">
                        <div class="text-2xl">‚ö†Ô∏è</div>
                        <p class="text-xs text-amber-800 dark:text-amber-200 leading-relaxed">
                            <b>Fraud Notice:</b> AI cross-checks every file with university registries. Forged documents lead to permanent blacklisting.
                        </p>
                    </div>
                    <div class="max-w-md mx-auto mb-6 p-4 rounded-xl bg-white dark:bg-slate-800 border">
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" id="legal-consent" onchange="toggleVaultBtn(this)" class="mt-1 w-5 h-5 rounded text-nexus-blue">
                            <span class="text-[10px] text-left opacity-70 font-bold italic">I confirm these documents are authentic.</span>
                        </label>
                    </div>
                    <input type="file" id="vault-file-input" class="hidden" onchange="handleVaultUpload(this)">
                    <button id="vault-upload-btn" onclick="document.getElementById('vault-file-input').click()" class="disabled-btn bg-nexus-blue text-white px-10 py-4 rounded-2xl font-bold shadow-lg">Choose File</button>
                    <div id="upload-status" class="mt-8 hidden animate-fade text-left max-w-md mx-auto bg-white dark:bg-slate-800 p-6 rounded-2xl border">
                        <div class="w-full bg-slate-200 h-1.5 rounded-full overflow-hidden">
                            <div id="up-bar" class="bg-nexus-blue h-full w-0 transition-all duration-300"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="chat-tab" class="tab-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-4xl font-black">Nexus <span class="text-nexus-blue">AI</span></h2>
                    <div class="flex items-center gap-2 bg-slate-100 dark:bg-slate-900 px-4 py-2 rounded-xl">
                        <span class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></span>
                        <span class="text-[10px] font-black uppercase opacity-60">Neural Engine Active</span>
                    </div>
                </div>
                <div id="chat-window" class="bg-slate-100 dark:bg-slate-900 p-8 rounded-[2.5rem] h-[400px] overflow-y-auto mb-6 border dark:border-slate-800 shadow-inner">
                    <div class="bg-white dark:bg-slate-800 p-5 rounded-2xl rounded-tl-none max-w-[85%] text-sm mb-6 border shadow-sm">
                        <p class="font-black text-nexus-blue text-[10px] uppercase mb-1">Nexus Protocol</p>
                        Welcome. I can assist with scholarship eligibility, document verification status, or help you log a grievance. How can I help?
                    </div>
                </div>
                <div class="flex gap-3 bg-white dark:bg-slate-900 p-2 rounded-3xl border dark:border-slate-800 shadow-xl">
                    <input id="ai-input" type="text" placeholder="Ask about grants or vault security..." class="flex-1 p-4 bg-transparent outline-none text-sm px-6">
                    <button onclick="askAI()" class="bg-nexus-blue text-white px-10 py-4 rounded-2xl font-bold shadow-lg">Consult AI</button>
                </div>
            </div>

            <div id="profile-tab" class="tab-content">
                <div class="flex justify-between items-end mb-8">
                    <h2 class="text-4xl font-black">Digital <span class="text-nexus-blue">Identity</span></h2>
                    <div class="px-4 py-2 bg-emerald-100 text-emerald-700 rounded-full text-[10px] font-black uppercase">Verified</div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                    <div class="lg:col-span-4 space-y-6">
                        <div class="bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-[2rem] overflow-hidden">
                            <div class="h-24 bg-nexus-blue"></div>
                            <div class="px-8 pb-8 -mt-12 text-center">
                                <div class="relative w-24 h-24 mx-auto mb-4 group">
                                    <img id="profile-img" src="https://ui-avatars.com/api/?name=User&background=004aad&color=fff&size=128" class="w-full h-full rounded-2xl border-4 border-white dark:border-slate-900 shadow-xl object-cover">
                                    <label for="img-upload" class="absolute inset-0 flex items-center justify-center bg-black/40 text-white rounded-2xl opacity-0 group-hover:opacity-100 cursor-pointer transition-opacity">
                                        <span class="text-[10px] font-bold">CHANGE</span>
                                    </label>
                                    <input type="file" id="img-upload" class="hidden" accept="image/*" onchange="uploadPhoto(this)">
                                </div>
                                <h3 id="display-name" class="text-xl font-bold">Nexus Student</h3>
                                
                                <div class="mt-4 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl text-left">
                                    <p class="text-[10px] font-black text-nexus-blue uppercase mb-2">Contact Details</p>
                                    <p id="display-email" class="text-xs opacity-70 truncate mb-1">email@nexus.com</p>
                                    <p id="display-phone" class="text-xs opacity-70">+00 0000 000 000</p>
                                </div>

                                <div class="mt-6 space-y-3">
                                    <input id="profile-name-input" type="text" placeholder="Full Legal Name" class="w-full p-3 rounded-xl bg-slate-50 dark:bg-slate-800 border-0 text-sm">
                                    <input id="profile-phone-input" type="text" placeholder="Phone Number" class="w-full p-3 rounded-xl bg-slate-50 dark:bg-slate-800 border-0 text-sm">
                                    <button onclick="saveProfile()" class="w-full bg-nexus-blue text-white font-bold py-3 rounded-xl text-sm shadow-lg">Sync Identity</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="lg:col-span-8">
                        <div class="bg-slate-50 dark:bg-slate-900/50 p-8 rounded-[2rem] border dark:border-slate-800 border-dashed">
                            <h4 class="text-sm font-black mb-4 text-nexus-blue">Audit Trail</h4>
                            <div id="history-list" class="space-y-3"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="grievance-tab" class="tab-content">
                <h2 class="text-4xl font-black mb-6">Support <span class="text-nexus-blue">Hub</span></h2>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1 bg-slate-50 p-6 rounded-3xl border">
                        <h3 class="font-bold mb-4">New Ticket</h3>
                        <textarea id="grievance-text" placeholder="Explain the issue..." class="w-full p-4 rounded-xl bg-white border-0 h-32 mb-4 text-sm"></textarea>
                        <button onclick="submitGrievance()" class="w-full bg-nexus-blue text-white py-3 rounded-xl font-bold shadow-lg">Submit</button>
                    </div>
                    <div class="lg:col-span-2">
                        <div id="ticket-list" class="space-y-4"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="notif" class="fixed bottom-10 right-10 transform translate-y-32 opacity-0 bg-slate-900 text-white p-6 rounded-2xl shadow-2xl transition-all z-50 pointer-events-none">
        <span id="notif-msg"></span>
    </div>

    <script>
        window.onload = () => {
            if(localStorage.getItem('nexus_login') === 'true') changePage('page-portal');
            else changePage('page-home');
            loadProfile(); loadHistory(); loadTickets();
        };

        function changePage(id) {
            document.querySelectorAll('#page-home, #page-login, #page-portal').forEach(p => p.classList.add('hidden-section'));
            document.getElementById(id).classList.remove('hidden-section');
        }

        function handleLogin() {
            const email = document.getElementById('user-email').value;
            if(email) {
                localStorage.setItem('nexus_login', 'true');
                localStorage.setItem('p_email', email);
                changePage('page-portal');
                loadProfile();
                showNotification("Welcome Back");
            }
        }

        function handleLogout() { localStorage.removeItem('nexus_login'); location.reload(); }
        function toggleDarkMode() { document.documentElement.classList.toggle('dark'); }

        function switchTab(id, btn) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active-nav'));
            document.getElementById(id).classList.add('active');
            btn.classList.add('active-nav');
        }

        // FILTER LOGIC
        function filterScholarships() {
            const query = document.getElementById('scholarship-search').value.toLowerCase();
            const cat = document.getElementById('category-filter').value;
            const cards = document.querySelectorAll('.scholar-card');

            cards.forEach(card => {
                const name = card.getAttribute('data-name').toLowerCase();
                const cardCat = card.getAttribute('data-category');
                const matchesSearch = name.includes(query);
                const matchesCat = (cat === 'all' || cardCat === cat);

                if(matchesSearch && matchesCat) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function submitGrievance() {
            const txt = document.getElementById('grievance-text');
            if(!txt.value.trim()) return;
            let tix = JSON.parse(localStorage.getItem('nexus_tickets') || '[]');
            tix.unshift({ id: "TX-"+Math.floor(1000+Math.random()*9000), body: txt.value, status: "Pending", date: new Date().toLocaleDateString() });
            localStorage.setItem('nexus_tickets', JSON.stringify(tix));
            txt.value = ""; loadTickets();
            showNotification("Ticket Created");
        }

        function loadTickets() {
            const list = document.getElementById('ticket-list');
            const tix = JSON.parse(localStorage.getItem('nexus_tickets') || '[]');
            if(!list) return;
            list.innerHTML = tix.length ? "" : "<p class='opacity-40 italic text-sm text-center'>No active tickets.</p>";
            tix.forEach(t => {
                const div = document.createElement('div');
                div.className = "p-4 bg-white dark:bg-slate-800 rounded-2xl border flex justify-between items-center animate-fade";
                div.innerHTML = `<div><p class='font-bold text-sm'>${t.body}</p><p class='text-[10px] opacity-40 uppercase'>${t.id}</p></div><span class='text-[10px] font-black uppercase bg-slate-100 px-3 py-1 rounded-full'>${t.status}</span>`;
                list.appendChild(div);
            });
        }

        function toggleVaultBtn(cb) { 
            const b = document.getElementById('vault-upload-btn');
            cb.checked ? b.classList.remove('disabled-btn') : b.classList.add('disabled-btn');
        }

        function handleVaultUpload(input) {
            const status = document.getElementById('upload-status');
            const bar = document.getElementById('up-bar');
            status.classList.remove('hidden');
            let w = 0;
            const inter = setInterval(() => {
                w += 25;
                if(w >= 100) { clearInterval(inter); showNotification("Upload Verified"); }
                bar.style.width = w + "%";
            }, 150);
        }

        const aiReplies = [
            "Your eligibility for the NSP Central Sector depends on being in the top 20th percentile. Shall I check your board results?",
            "For the Pragati Scholarship, ensure you have your AICTE-approved college ID in the Vault.",
            "I've verified your PRN. Your 'HDFC Badhte Kadam' application is currently being audited.",
            "Reminder: MOMA scholarship requires your religious minority self-declaration form.",
            "Reliance Foundation results for 2026 will be announced soon. Your aptitude score is already linked."
        ];
        let rIdx = 0;

        function askAI() {
            const i = document.getElementById('ai-input');
            const w = document.getElementById('chat-window');
            if(!i.value.trim()) return;
            const u = document.createElement('div');
            u.className = "bg-nexus-blue text-white p-4 rounded-2xl rounded-tr-none ml-auto max-w-[80%] text-sm mb-4 animate-fade shadow-md";
            u.innerHTML = i.value;
            w.appendChild(u);
            w.scrollTop = w.scrollHeight;
            setTimeout(() => {
                const a = document.createElement('div');
                a.className = "bg-white dark:bg-slate-800 p-4 rounded-2xl rounded-tl-none max-w-[80%] text-sm mb-4 border shadow-sm animate-fade";
                a.innerHTML = `<p class="font-black text-nexus-blue text-[10px] uppercase mb-1">Nexus Assistant</p>${aiReplies[rIdx]}`;
                w.appendChild(a);
                w.scrollTop = w.scrollHeight;
                rIdx = (rIdx + 1) % aiReplies.length;
            }, 700);
            i.value = "";
        }

        function uploadPhoto(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('profile-img').src = e.target.result;
                    localStorage.setItem('p_img', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
                showNotification("Photo Updated");
            }
        }

        function loadProfile() {
            document.getElementById('display-name').textContent = localStorage.getItem('p_name') || "Nexus Student";
            document.getElementById('display-email').textContent = localStorage.getItem('p_email') || "Not set";
            document.getElementById('display-phone').textContent = localStorage.getItem('p_phone') || "Not set";
            if(localStorage.getItem('p_img')) document.getElementById('profile-img').src = localStorage.getItem('p_img');
        }

        function saveProfile() {
            const val = document.getElementById('profile-name-input').value;
            const phone = document.getElementById('profile-phone-input').value;
            if(val) localStorage.setItem('p_name', val);
            if(phone) localStorage.setItem('p_phone', phone);
            loadProfile();
            showNotification("Profile Updated");
        }

        function applyForScholarship(name, cat) {
            let h = JSON.parse(localStorage.getItem('nexus_history') || '[]');
            h.unshift({ name, cat, date: new Date().toLocaleDateString(), status: "Audit" });
            localStorage.setItem('nexus_history', JSON.stringify(h));
            loadHistory();
            showNotification("Application Submitted");
        }

        function loadHistory() {
            const list = document.getElementById('history-list');
            const h = JSON.parse(localStorage.getItem('nexus_history') || '[]');
            if(!list) return;
            list.innerHTML = h.length ? "" : "<p class='opacity-40 italic text-sm'>No history found.</p>";
            h.forEach(item => {
                const d = document.createElement('div');
                d.className = "flex justify-between items-center p-3 bg-white dark:bg-slate-800/50 rounded-xl border text-[11px]";
                d.innerHTML = `<span>${item.name}</span><span class='font-bold text-nexus-blue'>${item.status}</span>`;
                list.appendChild(d);
            });
        }

        function showNotification(msg) {
            const n = document.getElementById('notif');
            document.getElementById('notif-msg').textContent = msg;
            n.classList.remove('translate-y-32', 'opacity-0');
            setTimeout(() => n.classList.add('translate-y-32', 'opacity-0'), 3000);
        }
    </script>
</body>
</html>